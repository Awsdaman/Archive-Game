<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£Ø±Ø´ÙŠÙ | The Archive Round</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Oswald:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a0a0e;
  --surface:#111117;
  --surface2:#18181f;
  --surface3:#1e1e27;
  --accent:#c8f135;
  --accent2:#a8d120;
  --accent-glow:rgba(200,241,53,0.18);
  --accent-dim:rgba(200,241,53,0.08);
  --text:#f2f2f2;
  --text-dim:#777;
  --red:#ff4455;
  --red-dim:rgba(255,68,85,0.15);
  --green-dim:rgba(200,241,53,0.15);
  --border:rgba(200,241,53,0.15);
  --border2:rgba(255,255,255,0.06);
  --radius:10px;
}
body{font-family:'Cairo',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
body.ltr{direction:ltr;font-family:'Oswald','Cairo',sans-serif}
.view{display:none;min-height:100vh;animation:fadeIn .4s ease}
.view.active{display:flex;flex-direction:column}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* â”€â”€ Noise overlay â”€â”€ */
body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");pointer-events:none;z-index:9999}

/* â”€â”€ TOP BAR â”€â”€ */
.topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;border-bottom:1px solid var(--border2)}
.logo{font-family:'Oswald',sans-serif;font-size:15px;font-weight:700;letter-spacing:2px;color:var(--accent);text-transform:uppercase}
.lang-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text-dim);padding:6px 14px;border-radius:20px;cursor:pointer;font-family:inherit;font-size:13px;transition:.2s}
.lang-btn:hover{color:var(--accent);border-color:var(--accent)}

/* â”€â”€ SETUP VIEW â”€â”€ */
#view-setup{align-items:center;justify-content:center;padding:40px 20px}
.hero{text-align:center;margin-bottom:48px}
.hero h1{font-family:'Oswald',sans-serif;font-size:clamp(2.2rem,6vw,3.8rem);font-weight:700;letter-spacing:3px;line-height:1;text-transform:uppercase}
.hero h1 span{color:var(--accent)}
.hero p{margin-top:10px;color:var(--text-dim);font-size:15px}
.setup-card{background:var(--surface);border:1px solid var(--border2);border-radius:16px;padding:36px;width:100%;max-width:480px;display:flex;flex-direction:column;gap:20px}
.setup-card h3{font-size:14px;font-weight:600;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
.field-group{display:flex;flex-direction:column;gap:8px}
label{font-size:13px;color:var(--text-dim)}
input{background:var(--surface2);border:1px solid var(--border2);border-radius:8px;padding:12px 16px;color:var(--text);font-family:inherit;font-size:15px;outline:none;transition:.2s;width:100%}
input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
input::placeholder{color:#444}
.teams-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.api-note{font-size:11px;color:var(--text-dim);line-height:1.5;background:var(--surface2);padding:10px 12px;border-radius:8px;border-left:3px solid var(--accent)}
body.ltr .api-note{border-left:none;border-right:3px solid var(--accent)}
.btn-primary{background:var(--accent);color:#0a0a0e;font-family:'Oswald',sans-serif;font-size:16px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border:none;border-radius:8px;padding:15px;cursor:pointer;transition:.2s;width:100%}
.btn-primary:hover{background:var(--accent2);transform:translateY(-1px);box-shadow:0 8px 24px var(--accent-glow)}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none}
.btn-secondary{background:transparent;color:var(--text-dim);border:1px solid var(--border2);border-radius:8px;padding:11px 20px;cursor:pointer;font-family:inherit;font-size:14px;transition:.2s}
.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}

/* â”€â”€ SEARCH VIEW â”€â”€ */
#view-search{padding:0}
.search-header{padding:24px 24px 0}
.search-header h2{font-family:'Oswald',sans-serif;font-size:22px;font-weight:700;letter-spacing:2px;text-transform:uppercase}
.search-header p{color:var(--text-dim);font-size:13px;margin-top:4px}
.search-body{padding:20px 24px;flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:16px}
.step-label{font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-bottom:6px}
.search-row{display:flex;gap:10px}
.search-row input{flex:1}
.search-row .btn-search{background:var(--accent);color:#0a0a0e;border:none;border-radius:8px;padding:12px 20px;cursor:pointer;font-family:'Oswald',sans-serif;font-weight:700;letter-spacing:1px;font-size:14px;white-space:nowrap;transition:.2s}
.search-row .btn-search:hover{background:var(--accent2)}
.search-row .btn-search:disabled{opacity:.4;cursor:not-allowed}
.results-list{display:flex;flex-direction:column;gap:8px}
.team-result{display:flex;align-items:center;gap:14px;background:var(--surface);border:1px solid var(--border2);border-radius:10px;padding:12px 16px;cursor:pointer;transition:.2s}
.team-result:hover{border-color:var(--accent);background:var(--accent-dim)}
.team-result.selected{border-color:var(--accent);background:var(--accent-dim)}
.team-logo{width:36px;height:36px;object-fit:contain;border-radius:4px}
.team-logo-placeholder{width:36px;height:36px;background:var(--surface3);border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:11px;color:var(--text-dim)}
.team-result-info{flex:1}
.team-result-name{font-weight:700;font-size:15px}
.team-result-sub{font-size:12px;color:var(--text-dim);margin-top:2px}
.check-icon{color:var(--accent);font-size:18px;opacity:0}
.team-result.selected .check-icon{opacity:1}
.fixture-card{background:var(--surface);border:1px solid var(--border2);border-radius:10px;padding:14px 16px;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:12px}
.fixture-card:hover{border-color:var(--accent);background:var(--accent-dim)}
.fixture-card.selected{border-color:var(--accent);background:var(--accent-dim)}
.fixture-teams{flex:1;display:flex;align-items:center;gap:10px}
.fixture-team-name{font-weight:700;font-size:14px;flex:1;text-align:right}
body.ltr .fixture-team-name{text-align:left}
.fixture-team-name.away{text-align:left}
body.ltr .fixture-team-name.away{text-align:right}
.fixture-score{background:var(--surface3);border-radius:6px;padding:4px 12px;font-family:'Oswald',sans-serif;font-weight:700;font-size:16px;white-space:nowrap}
.fixture-meta{font-size:11px;color:var(--text-dim);margin-top:4px;text-align:center}
.loading{text-align:center;padding:24px;color:var(--text-dim);font-size:14px}
.loading::after{content:'...';animation:dots 1.2s infinite}
@keyframes dots{0%,20%{content:'.'}40%,60%{content:'..'}80%,100%{content:'...'}}
.error-msg{color:var(--red);font-size:13px;padding:10px 14px;background:var(--red-dim);border-radius:8px}
.divider{border:none;border-top:1px solid var(--border2);margin:4px 0}
.search-footer{padding:16px 24px;border-top:1px solid var(--border2);display:flex;justify-content:flex-end;gap:10px}

/* â”€â”€ GAME VIEW â”€â”€ */
#view-game{padding:0}
.game-header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:14px 20px;gap:12px;border-bottom:1px solid var(--border2)}
.team-score-box{display:flex;flex-direction:column;gap:4px}
.team-score-box.team2{text-align:left;align-items:flex-start}
body.ltr .team-score-box.team2{text-align:right;align-items:flex-end}
.team-score-box.team1{text-align:right;align-items:flex-end}
body.ltr .team-score-box.team1{text-align:left;align-items:flex-start}
.tsb-name{font-size:12px;font-weight:700;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.tsb-points{font-family:'Oswald',sans-serif;font-size:32px;font-weight:700;color:var(--accent);line-height:1}
.tsb-strikes{display:flex;gap:4px}
.strike-dot{width:10px;height:10px;border-radius:50%;background:var(--surface3);border:1px solid var(--border2);transition:.3s}
.strike-dot.active{background:var(--red);border-color:var(--red)}
.game-center{display:flex;flex-direction:column;align-items:center;gap:4px}
.timer-display{font-family:'Oswald',sans-serif;font-size:28px;font-weight:700;min-width:60px;text-align:center;transition:color .3s}
.timer-display.warning{color:var(--red);animation:pulse .5s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.round-label{font-size:10px;color:var(--text-dim);letter-spacing:2px;text-transform:uppercase}

/* â”€â”€ MATCH CARD â”€â”€ */
.card-scroll{flex:1;overflow-y:auto;padding:16px}
.match-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;overflow:hidden;max-width:600px;margin:0 auto;box-shadow:0 0 40px rgba(200,241,53,0.06)}
.card-top{display:grid;grid-template-columns:1fr 1fr;background:var(--surface2);border-bottom:1px solid var(--border)}
.card-info-row{padding:8px 14px;display:flex;align-items:center;justify-content:space-between;gap:8px;border-bottom:1px solid var(--border2)}
.card-info-row:last-child{border-bottom:none}
.card-info-label{font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--text-dim)}
.card-teams-section{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:16px 14px;gap:10px;background:var(--surface2);border-bottom:1px solid var(--border)}
.card-team{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}
.card-team-logo{width:44px;height:44px;object-fit:contain}
.card-team-logo-ph{width:44px;height:44px;background:var(--surface3);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:10px;color:var(--text-dim)}
.card-team-name{font-size:13px;font-weight:700;line-height:1.2}
.card-score-center{display:flex;flex-direction:column;align-items:center;gap:4px}
.card-score-label{font-size:9px;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase}
.card-score-value{font-family:'Oswald',sans-serif;font-size:28px;font-weight:700;color:var(--accent)}
.card-target-row{padding:10px 14px;border-bottom:1px solid var(--border);background:rgba(200,241,53,0.04)}
.card-target-label{font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--accent);margin-bottom:4px}
.card-events{display:grid;grid-template-columns:1fr 1fr;border-bottom:none}
.card-events-col{padding:10px 0}
.card-events-col:first-child{border-left:1px solid var(--border)}
body.ltr .card-events-col:first-child{border-left:none;border-right:1px solid var(--border)}
.events-header{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--text-dim);padding:0 12px 8px;text-align:center;border-bottom:1px solid var(--border2);margin-bottom:6px}

/* â”€â”€ SQUARES â”€â”€ */
.square{position:relative;cursor:default;transition:all .2s}
.sq-hidden{background:var(--surface3);border:1px solid var(--border2);border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.15s;font-family:'Oswald',sans-serif;font-weight:700;font-size:16px;color:var(--text-dim);user-select:none}
.sq-hidden:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-dim);box-shadow:0 0 12px var(--accent-glow)}
.sq-hidden:active{transform:scale(.96)}
.sq-revealed{animation:flipIn .35s ease}
@keyframes flipIn{from{transform:rotateX(-90deg);opacity:0}to{transform:rotateX(0);opacity:1}}

/* Info squares */
.info-sq{flex:1;min-height:36px;padding:6px 10px;border-radius:6px;display:flex;align-items:center;justify-content:flex-end}
body.ltr .info-sq{justify-content:flex-start}
.info-sq.sq-hidden{justify-content:center}
.info-sq .sq-value{font-weight:700;font-size:14px}

/* Team squares */
.team-sq{display:flex;flex-direction:column;align-items:center;gap:6px;width:100%;padding:6px;border-radius:8px;min-height:70px;justify-content:center}
.team-sq.sq-hidden{background:var(--surface3);border:1px solid var(--border2);cursor:pointer}
.team-sq.sq-hidden:hover{border-color:var(--accent);background:var(--accent-dim)}

/* Score square */
.score-sq{min-width:80px;text-align:center;border-radius:8px;padding:6px 10px}
.score-sq.sq-hidden{background:var(--surface3);border:1px solid var(--border2);cursor:pointer;min-height:50px;display:flex;align-items:center;justify-content:center}

/* Target square */
.target-sq{border-radius:8px;padding:8px 12px;min-height:38px;display:flex;align-items:center}
.target-sq.sq-hidden{background:var(--surface3);border:1px solid rgba(200,241,53,0.3);cursor:pointer;justify-content:center;min-height:42px}
.target-sq.sq-hidden:hover{border-color:var(--accent);background:var(--accent-dim)}
.target-sq .sq-value{font-weight:700;font-size:15px;color:var(--accent)}

/* Event squares */
.event-sq{margin:3px 8px;padding:8px 10px;border-radius:7px;min-height:40px;display:flex;align-items:center;gap:8px}
.event-sq.sq-hidden{background:var(--surface3);border:1px solid var(--border2);cursor:pointer;justify-content:center}
.event-sq.sq-hidden:hover{border-color:var(--accent);background:var(--accent-dim)}
.event-sq .event-type{font-family:'Oswald',sans-serif;font-weight:700;font-size:12px;padding:2px 7px;border-radius:4px}
.event-sq .event-type.G{background:var(--green-dim);color:var(--accent)}
.event-sq .event-type.A{background:rgba(100,150,255,0.15);color:#88aaff}
.event-sq .event-player{font-weight:700;font-size:13px;flex:1}
.event-sq .event-minute{font-family:'Oswald',sans-serif;font-size:12px;color:var(--text-dim);white-space:nowrap}

/* â”€â”€ CONTROLS PANEL â”€â”€ */
.controls{padding:12px 16px;border-top:1px solid var(--border2);display:flex;flex-direction:column;gap:10px}
.controls-row{display:flex;gap:8px;align-items:center}
.ctrl-btn{flex:1;padding:10px;border-radius:8px;border:none;cursor:pointer;font-family:'Oswald',sans-serif;font-weight:700;font-size:13px;letter-spacing:1px;text-transform:uppercase;transition:.2s}
.ctrl-btn:disabled{opacity:.35;cursor:not-allowed}
.btn-correct{background:var(--green-dim);color:var(--accent);border:1px solid rgba(200,241,53,0.3)}
.btn-correct:hover:not(:disabled){background:rgba(200,241,53,0.25)}
.btn-wrong{background:var(--red-dim);color:var(--red);border:1px solid rgba(255,68,85,0.3)}
.btn-wrong:hover:not(:disabled){background:rgba(255,68,85,0.25)}
.btn-timer{background:var(--surface2);color:var(--text);border:1px solid var(--border2)}
.btn-timer:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}
.btn-reveal-all{background:var(--surface2);color:var(--text-dim);border:1px solid var(--border2);font-size:12px}
.btn-reveal-all:hover:not(:disabled){color:var(--text);border-color:var(--border)}
.btn-show-answer{background:var(--surface3);color:var(--text-dim);border:1px solid var(--border2);font-size:12px;padding:8px}
.btn-show-answer:hover{color:var(--accent);border-color:var(--accent)}
.answer-reveal{background:var(--surface2);border:1px solid var(--accent);border-radius:8px;padding:10px 14px;font-size:13px;display:none}
.answer-reveal.visible{display:block;animation:fadeIn .2s ease}
.answer-reveal .ar-label{font-size:11px;color:var(--text-dim);margin-bottom:4px;letter-spacing:1px;text-transform:uppercase}
.answer-reveal .ar-answer{font-weight:700;color:var(--accent)}
.team-ctrl-label{font-size:11px;color:var(--text-dim);text-align:center;letter-spacing:1px;text-transform:uppercase;width:100%}
.sep-label{font-size:10px;color:var(--text-dim);letter-spacing:1px;text-align:center;padding:0 4px;white-space:nowrap}
.status-bar{font-size:12px;color:var(--text-dim);text-align:center;padding:4px 0}
.status-bar.active-team{color:var(--accent);font-weight:700}

/* â”€â”€ NEW ROUND / NEXT CARD â”€â”€ */
.round-over-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:100;align-items:center;justify-content:center;animation:fadeIn .3s ease}
.round-over-overlay.show{display:flex}
.round-over-box{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:36px;max-width:400px;width:90%;text-align:center;display:flex;flex-direction:column;gap:16px}
.round-over-box h2{font-family:'Oswald',sans-serif;font-size:28px;font-weight:700;letter-spacing:2px}
.round-over-box h2 span{color:var(--accent)}
.round-over-box p{color:var(--text-dim);font-size:14px}
.score-display{display:flex;justify-content:center;gap:24px;padding:12px 0}
.sd-team{display:flex;flex-direction:column;gap:4px;align-items:center}
.sd-name{font-size:12px;color:var(--text-dim)}
.sd-pts{font-family:'Oswald',sans-serif;font-size:40px;font-weight:700;color:var(--accent)}
.sd-sep{font-family:'Oswald',sans-serif;font-size:32px;color:var(--text-dim);align-self:center}
.btns-row{display:flex;gap:10px}

/* Scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--surface3);border-radius:3px}

/* Responsive */
@media(max-width:480px){
  .game-header{padding:10px 12px}
  .tsb-points{font-size:26px}
  .card-team-logo,.card-team-logo-ph{width:36px;height:36px}
  .card-score-value{font-size:22px}
  .controls{padding:10px 12px}
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SETUP VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="view-setup" class="view active">
  <div class="topbar">
    <span class="logo">âš½ Archive</span>
    <button class="lang-btn" onclick="toggleLang()">EN / AR</button>
  </div>
  <div style="flex:1;display:flex;align-items:center;justify-content:center;padding:40px 20px">
    <div style="display:flex;flex-direction:column;align-items:center;width:100%;max-width:480px">
      <div class="hero">
        <h1 id="hero-title">Ø¬ÙˆÙ„Ø© <span>Ø§Ù„Ø£Ø±Ø´ÙŠÙ</span></h1>
        <p id="hero-sub">The Archive Round</p>
      </div>
      <div class="setup-card">
        <div>
          <div class="step-label" id="lbl-gamesetup">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©</div>
        </div>
        <div class="field-group">
          <label id="lbl-team1">Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</label>
          <input id="inp-team1" type="text" placeholder="Ø§Ù„Ù‡Ù„Ø§Ù„" autocomplete="off">
        </div>
        <div class="field-group">
          <label id="lbl-team2">Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</label>
          <input id="inp-team2" type="text" placeholder="Ø§Ù„Ù†ØµØ±" autocomplete="off">
        </div>
        <hr class="divider">
        <div class="field-group">
          <label id="lbl-apikey">API Key â€” API-Football (api-sports.io)</label>
          <input id="inp-apikey" type="text" placeholder="xxxxxxxxxxxxxxxxxxxxxxxx" autocomplete="off">
          <div class="api-note" id="api-note-text">
            Ù…Ø¬Ø§Ù†ÙŠ 100 Ø·Ù„Ø¨/ÙŠÙˆÙ… â€” Ø³Ø¬Ù‘Ù„ Ø¹Ù„Ù‰ api-sports.io Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­
          </div>
        </div>
        <button class="btn-primary" id="btn-start-setup" onclick="startSetup()">
          <span id="lbl-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø­Ø«</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SEARCH VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="view-search" class="view">
  <div class="topbar">
    <button class="btn-secondary" style="padding:6px 14px;font-size:13px" onclick="goTo('setup')">â† <span class="back-lbl">Ø±Ø¬ÙˆØ¹</span></button>
    <span class="logo" id="search-teams-header">â€”</span>
    <button class="lang-btn" onclick="toggleLang()">EN / AR</button>
  </div>

  <div class="search-body">
    <!-- Step 1: Find Team 1 -->
    <div id="section-team1-search">
      <div class="step-label" id="lbl-step1">Ø§Ù„Ø®Ø·ÙˆØ© 1 â€” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</div>
      <div class="search-row">
        <input id="inp-search-team1" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚..." autocomplete="off" onkeydown="if(event.key==='Enter')searchTeam(1)">
        <button class="btn-search" id="btn-search-t1" onclick="searchTeam(1)"><span id="lbl-search">Ø¨Ø­Ø«</span></button>
      </div>
      <div id="results-team1" class="results-list" style="margin-top:10px"></div>
    </div>

    <!-- Step 2: Find Team 2 -->
    <div id="section-team2-search" style="display:none">
      <div class="step-label" id="lbl-step2">Ø§Ù„Ø®Ø·ÙˆØ© 2 â€” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</div>
      <div class="search-row">
        <input id="inp-search-team2" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚..." autocomplete="off" onkeydown="if(event.key==='Enter')searchTeam(2)">
        <button class="btn-search" id="btn-search-t2" onclick="searchTeam(2)"><span>Ø¨Ø­Ø«</span></button>
      </div>
      <div id="results-team2" class="results-list" style="margin-top:10px"></div>
    </div>

    <!-- Step 3: Choose fixture -->
    <div id="section-fixtures" style="display:none">
      <div class="step-label" id="lbl-step3">Ø§Ù„Ø®Ø·ÙˆØ© 3 â€” Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</div>
      <div class="search-row" style="margin-bottom:10px">
        <input id="inp-season" type="number" placeholder="Ø§Ù„Ù…ÙˆØ³Ù… (Ù…Ø«Ø§Ù„ 2024)" min="2000" max="2030" style="max-width:200px">
        <button class="btn-search" id="btn-load-fixtures" onclick="loadFixtures()"><span id="lbl-loadfx">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</span></button>
      </div>
      <div id="results-fixtures" class="results-list"></div>
    </div>
  </div>

  <div class="search-footer">
    <button class="btn-secondary" onclick="goTo('setup')"><span id="lbl-cancel">Ø¥Ù„ØºØ§Ø¡</span></button>
    <button class="btn-primary" id="btn-create-card" style="padding:12px 28px;width:auto" onclick="createCard()" disabled><span id="lbl-createcard">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</span></button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GAME VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="view-game" class="view">
  <!-- Header with scores -->
  <div class="game-header">
    <div class="team-score-box team1" id="tsb-team1">
      <div class="tsb-name" id="gh-team1-name">ÙØ±ÙŠÙ‚ 1</div>
      <div class="tsb-points" id="gh-team1-pts">0</div>
      <div class="tsb-strikes" id="gh-team1-strikes"></div>
    </div>
    <div class="game-center">
      <div class="round-label" id="lbl-round">Ø§Ù„Ø¬ÙˆÙ„Ø©</div>
      <div class="timer-display" id="timer-display">30</div>
    </div>
    <div class="team-score-box team2" id="tsb-team2">
      <div class="tsb-name" id="gh-team2-name">ÙØ±ÙŠÙ‚ 2</div>
      <div class="tsb-points" id="gh-team2-pts">0</div>
      <div class="tsb-strikes" id="gh-team2-strikes"></div>
    </div>
  </div>

  <!-- Match card -->
  <div class="card-scroll">
    <div class="match-card" id="match-card">
      <!-- dynamically rendered -->
    </div>
  </div>

  <!-- Controls -->
  <div class="controls">
    <div class="status-bar" id="status-bar">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ø¨</div>
    <div class="controls-row">
      <button class="ctrl-btn btn-timer" id="btn-timer" onclick="startTimer()"><span id="lbl-starttimer">â–¶ Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙˆÙ‚Øª</span></button>
      <button class="ctrl-btn btn-reveal-all" id="btn-reveal-all" onclick="revealAll()"><span id="lbl-revealall">ÙƒØ´Ù Ø§Ù„ÙƒÙ„</span></button>
      <button class="ctrl-btn btn-show-answer" id="btn-show-ans" onclick="toggleAnswerReveal()">ğŸ”‘</button>
    </div>
    <div class="answer-reveal" id="answer-reveal">
      <div class="ar-label" id="lbl-correctanswer">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©</div>
      <div class="ar-answer" id="answer-text">â€”</div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
      <div>
        <div class="team-ctrl-label" id="ctrl-t1-label">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <button class="ctrl-btn btn-correct" id="btn-t1-correct" onclick="markAnswer(0, true)">âœ“</button>
          <button class="ctrl-btn btn-wrong" id="btn-t1-wrong" onclick="markAnswer(0, false)">âœ—</button>
        </div>
      </div>
      <div>
        <div class="team-ctrl-label" id="ctrl-t2-label">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <button class="ctrl-btn btn-correct" id="btn-t2-correct" onclick="markAnswer(1, true)">âœ“</button>
          <button class="ctrl-btn btn-wrong" id="btn-t2-wrong" onclick="markAnswer(1, false)">âœ—</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Round Over Overlay -->
<div class="round-over-overlay" id="round-over-overlay">
  <div class="round-over-box">
    <h2 id="round-over-title">Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬ÙˆÙ„Ø©</h2>
    <p id="round-over-msg">Ù„Ù… ÙŠØ¬Ø¨ Ø£Ø­Ø¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</p>
    <div class="score-display">
      <div class="sd-team"><div class="sd-name" id="ro-t1-name">â€”</div><div class="sd-pts" id="ro-t1-pts">0</div></div>
      <div class="sd-sep">:</div>
      <div class="sd-team"><div class="sd-pts" id="ro-t2-pts">0</div><div class="sd-name" id="ro-t2-name">â€”</div></div>
    </div>
    <div class="btns-row">
      <button class="btn-secondary" style="flex:1" onclick="newCard()"><span id="lbl-newcard">Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</span></button>
      <button class="btn-primary" style="flex:1;padding:12px" onclick="endGame()"><span id="lbl-endgame">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</span></button>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TRANSLATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TX = {
  ar: {
    heroTitle: 'Ø¬ÙˆÙ„Ø© <span>Ø§Ù„Ø£Ø±Ø´ÙŠÙ</span>',
    heroSub: 'The Archive Round',
    gameSetup: 'Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©',
    lbl_team1: 'Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„',
    lbl_team2: 'Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ',
    lbl_apikey: 'Ù…ÙØªØ§Ø­ API â€” API-Football (api-sports.io)',
    apiNote: 'Ù…Ø¬Ø§Ù†ÙŠ 100 Ø·Ù„Ø¨/ÙŠÙˆÙ… â€” Ø³Ø¬Ù‘Ù„ Ø¹Ù„Ù‰ api-sports.io Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­',
    lbl_start: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø­Ø«',
    lbl_step1: 'Ø§Ù„Ø®Ø·ÙˆØ© 1 â€” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„',
    lbl_step2: 'Ø§Ù„Ø®Ø·ÙˆØ© 2 â€” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ',
    lbl_step3: 'Ø§Ù„Ø®Ø·ÙˆØ© 3 â€” Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©',
    lbl_search: 'Ø¨Ø­Ø«',
    lbl_loadfx: 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª',
    lbl_createcard: 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©',
    lbl_cancel: 'Ø¥Ù„ØºØ§Ø¡',
    lbl_back: 'Ø±Ø¬ÙˆØ¹',
    lbl_league: 'Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©',
    lbl_season: 'Ø§Ù„Ù…ÙˆØ³Ù…',
    lbl_result: 'Ø§Ù„Ù†ØªÙŠØ¬Ø©',
    lbl_target: 'Ø§Ù„Ù…Ø·Ù„ÙˆØ¨',
    lbl_starttimer: 'â–¶ Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙˆÙ‚Øª',
    lbl_stoptimer: 'â–  Ø¥ÙŠÙ‚Ø§Ù',
    lbl_revealall: 'ÙƒØ´Ù Ø§Ù„ÙƒÙ„',
    lbl_correctanswer: 'Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©',
    lbl_round: 'Ø§Ù„Ø¬ÙˆÙ„Ø©',
    roundover: 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬ÙˆÙ„Ø©',
    roundover_nobody: 'Ù„Ù… ÙŠØ¬Ø¨ Ø£Ø­Ø¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',
    roundover_correct: 'Ø£Ø¬Ø§Ø¨ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!',
    lbl_newcard: 'Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©',
    lbl_endgame: 'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©',
    status_ready: 'Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ø¨',
    status_timing: 'Ø§Ù„ÙˆÙ‚Øª ÙŠØ¹Ù…Ù„...',
    targetQ_scored: (name, num) => `Ù…Ù† Ø³Ø¬Ù‘Ù„ Ø§Ù„Ù‡Ø¯Ù Ø±Ù‚Ù… ${num} Ù„Ù€ ${name}ØŸ`,
    targetQ_assisted: (name, num) => `Ù…Ù† ØµÙ†Ø¹ Ø§Ù„Ù‡Ø¯Ù Ø±Ù‚Ù… ${num} Ù„Ù€ ${name}ØŸ`,
    lbl_goal: 'Ù‡Ø¯Ù',
    lbl_assist: 'ØªÙ…Ø±ÙŠØ±Ø©',
    loading_teams: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...',
    loading_fixtures: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª...',
    no_results: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬',
    select_team_first: 'Ø§Ø®ØªØ± Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹',
    select_fixture: 'Ø§Ø®ØªØ± Ù…Ø¨Ø§Ø±Ø§Ø© Ø£ÙˆÙ„Ø§Ù‹',
    error_api: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API â€” ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­',
    t1_ctrl: 'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„',
    t2_ctrl: 'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ',
    no_events: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù',
  },
  en: {
    heroTitle: 'The <span>Archive</span>',
    heroSub: 'Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£Ø±Ø´ÙŠÙ',
    gameSetup: 'Game Setup',
    lbl_team1: 'Team 1 Name',
    lbl_team2: 'Team 2 Name',
    lbl_apikey: 'API Key â€” API-Football (api-sports.io)',
    apiNote: 'Free: 100 requests/day â€” Sign up at api-sports.io to get your key',
    lbl_start: 'Start Search',
    lbl_step1: 'Step 1 â€” Search for Team 1',
    lbl_step2: 'Step 2 â€” Search for Team 2',
    lbl_step3: 'Step 3 â€” Select a Match',
    lbl_search: 'Search',
    lbl_loadfx: 'Load Matches',
    lbl_createcard: 'Create Card',
    lbl_cancel: 'Cancel',
    lbl_back: 'Back',
    lbl_league: 'League',
    lbl_season: 'Season',
    lbl_result: 'Result',
    lbl_target: 'Target',
    lbl_starttimer: 'â–¶ Start Timer',
    lbl_stoptimer: 'â–  Stop',
    lbl_revealall: 'Reveal All',
    lbl_correctanswer: 'Correct Answer',
    lbl_round: 'Round',
    roundover: 'Round Over',
    roundover_nobody: 'Nobody answered correctly',
    roundover_correct: 'answered correctly!',
    lbl_newcard: 'New Card',
    lbl_endgame: 'End Game',
    status_ready: 'Ready to play',
    status_timing: 'Timer running...',
    targetQ_scored: (name, num) => `Who scored goal #${num} for ${name}?`,
    targetQ_assisted: (name, num) => `Who assisted goal #${num} for ${name}?`,
    lbl_goal: 'Goal',
    lbl_assist: 'Assist',
    loading_teams: 'Searching...',
    loading_fixtures: 'Loading matches...',
    no_results: 'No results found',
    select_team_first: 'Please select team 1 first',
    select_fixture: 'Please select a fixture first',
    error_api: 'API connection error â€” check your key',
    t1_ctrl: 'Team 1',
    t2_ctrl: 'Team 2',
    no_events: 'No goals',
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let S = {
  lang: 'ar',
  apiKey: '',
  teamInputs: ['', ''],
  selectedTeams: [null, null],
  selectedFixture: null,
  matchData: null,
  squares: [],
  revealed: new Set(),
  teamPoints: [0, 0],
  teamStrikes: [0, 0],
  teamEliminated: [false, false],
  targetSquareIdx: -1,
  targetAnswer: '',
  correctTeam: -1,
  timerInterval: null,
  timerSeconds: 30,
  timerRunning: false,
  roundActive: true,
};

function tx(key, ...args) {
  const t = TX[S.lang][key];
  if (typeof t === 'function') return t(...args);
  return t || key;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function goTo(view) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.getElementById('view-' + view).classList.add('active');
}

function setLangDir() {
  if (S.lang === 'ar') {
    document.documentElement.lang = 'ar';
    document.documentElement.dir = 'rtl';
    document.body.classList.remove('ltr');
  } else {
    document.documentElement.lang = 'en';
    document.documentElement.dir = 'ltr';
    document.body.classList.add('ltr');
  }
}

function toggleLang() {
  S.lang = S.lang === 'ar' ? 'en' : 'ar';
  setLangDir();
  updateAllText();
}

function updateAllText() {
  const ids = {
    'hero-title': 'heroTitle',
    'hero-sub': 'heroSub',
    'lbl-gamesetup': 'gameSetup',
    'lbl-team1': 'lbl_team1',
    'lbl-team2': 'lbl_team2',
    'lbl-apikey': 'lbl_apikey',
    'api-note-text': 'apiNote',
    'lbl-start': 'lbl_start',
    'lbl-step1': 'lbl_step1',
    'lbl-step2': 'lbl_step2',
    'lbl-step3': 'lbl_step3',
    'lbl-search': 'lbl_search',
    'btn-search-t1': 'lbl_search',
    'lbl-loadfx': 'lbl_loadfx',
    'lbl-createcard': 'lbl_createcard',
    'lbl-cancel': 'lbl_cancel',
    'lbl-starttimer': 'lbl_starttimer',
    'lbl-revealall': 'lbl_revealall',
    'lbl-correctanswer': 'lbl_correctanswer',
    'lbl-round': 'lbl_round',
    'lbl-newcard': 'lbl_newcard',
    'lbl-endgame': 'lbl_endgame',
    'status-bar': 'status_ready',
    'ctrl-t1-label': 't1_ctrl',
    'ctrl-t2-label': 't2_ctrl',
  };
  for (const [id, key] of Object.entries(ids)) {
    const el = document.getElementById(id);
    if (el) el.innerHTML = tx(key);
  }
  document.querySelectorAll('.back-lbl').forEach(el => el.textContent = tx('lbl_back'));

  // placeholders
  const p1 = document.getElementById('inp-team1');
  const p2 = document.getElementById('inp-team2');
  if (p1) p1.placeholder = S.lang === 'ar' ? 'Ø§Ù„Ù‡Ù„Ø§Ù„' : 'Al-Hilal';
  if (p2) p2.placeholder = S.lang === 'ar' ? 'Ø§Ù„Ù†ØµØ±' : 'Al-Nassr';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const API_BASE = 'https://v3.football.api-sports.io';

async function apiGet(path) {
  const res = await fetch(API_BASE + path, {
    headers: { 'x-apisports-key': S.apiKey }
  });
  if (!res.ok) throw new Error('API error ' + res.status);
  const data = await res.json();
  if (data.errors && Object.keys(data.errors).length > 0) {
    const msg = Object.values(data.errors)[0];
    throw new Error(msg);
  }
  return data.response;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SETUP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startSetup() {
  const t1 = document.getElementById('inp-team1').value.trim();
  const t2 = document.getElementById('inp-team2').value.trim();
  const key = document.getElementById('inp-apikey').value.trim();

  if (!t1 || !t2) { alert(S.lang === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ†' : 'Enter both team names'); return; }
  if (!key) { alert(S.lang === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Ø§Ù„Ù€ API' : 'Enter your API key'); return; }

  S.teamInputs = [t1, t2];
  S.apiKey = key;
  S.selectedTeams = [null, null];
  S.selectedFixture = null;

  document.getElementById('inp-search-team1').value = t1;
  document.getElementById('inp-search-team2').value = t2;
  document.getElementById('search-teams-header').textContent = t1 + ' vs ' + t2;

  document.getElementById('section-team2-search').style.display = 'none';
  document.getElementById('section-fixtures').style.display = 'none';
  document.getElementById('results-team1').innerHTML = '';
  document.getElementById('results-team2').innerHTML = '';
  document.getElementById('results-fixtures').innerHTML = '';
  document.getElementById('btn-create-card').disabled = true;

  goTo('search');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TEAM SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function searchTeam(num) {
  const inputId = num === 1 ? 'inp-search-team1' : 'inp-search-team2';
  const resultsId = num === 1 ? 'results-team1' : 'results-team2';
  const query = document.getElementById(inputId).value.trim();
  if (!query) return;

  const el = document.getElementById(resultsId);
  el.innerHTML = `<div class="loading">${tx('loading_teams')}</div>`;

  try {
    const results = await apiGet(`/teams?name=${encodeURIComponent(query)}`);
    renderTeamResults(results, num, el);
  } catch(e) {
    el.innerHTML = `<div class="error-msg">${tx('error_api')}: ${e.message}</div>`;
  }
}

function renderTeamResults(results, num, container) {
  if (!results || results.length === 0) {
    container.innerHTML = `<div class="loading">${tx('no_results')}</div>`;
    return;
  }
  container.innerHTML = '';
  results.slice(0, 8).forEach(r => {
    const team = r.team;
    const div = document.createElement('div');
    div.className = 'team-result';
    div.onclick = () => selectTeam(num, r, div);
    const logo = team.logo
      ? `<img class="team-logo" src="${team.logo}" alt="" onerror="this.style.display='none'">`
      : `<div class="team-logo-placeholder">âš½</div>`;
    div.innerHTML = `
      ${logo}
      <div class="team-result-info">
        <div class="team-result-name">${team.name}</div>
        <div class="team-result-sub">${r.venue?.country || ''}</div>
      </div>
      <span class="check-icon">âœ“</span>
    `;
    container.appendChild(div);
  });
}

function selectTeam(num, data, el) {
  S.selectedTeams[num - 1] = data;
  const containerId = num === 1 ? 'results-team1' : 'results-team2';
  document.querySelectorAll('#' + containerId + ' .team-result').forEach(e => e.classList.remove('selected'));
  el.classList.add('selected');

  if (num === 1) {
    document.getElementById('section-team2-search').style.display = 'block';
    document.getElementById('section-fixtures').style.display = 'none';
  } else {
    document.getElementById('section-fixtures').style.display = 'block';
    const season = new Date().getFullYear();
    document.getElementById('inp-season').value = season;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FIXTURE SEARCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadFixtures() {
  if (!S.selectedTeams[0]) { alert(tx('select_team_first')); return; }

  const season = document.getElementById('inp-season').value || new Date().getFullYear();
  const el = document.getElementById('results-fixtures');
  el.innerHTML = `<div class="loading">${tx('loading_fixtures')}</div>`;
  document.getElementById('btn-create-card').disabled = true;
  S.selectedFixture = null;

  try {
    let fixtures;
    if (S.selectedTeams[1]) {
      const id1 = S.selectedTeams[0].team.id;
      const id2 = S.selectedTeams[1].team.id;
      fixtures = await apiGet(`/fixtures/headtohead?h2h=${id1}-${id2}&season=${season}&last=30`);
    } else {
      const id1 = S.selectedTeams[0].team.id;
      fixtures = await apiGet(`/fixtures?team=${id1}&season=${season}`);
    }
    renderFixtures(fixtures, el);
  } catch(e) {
    el.innerHTML = `<div class="error-msg">${tx('error_api')}: ${e.message}</div>`;
  }
}

function renderFixtures(fixtures, container) {
  if (!fixtures || fixtures.length === 0) {
    container.innerHTML = `<div class="loading">${tx('no_results')}</div>`;
    return;
  }
  container.innerHTML = '';
  // Sort by date descending
  fixtures.sort((a,b) => b.fixture.timestamp - a.fixture.timestamp);
  fixtures.slice(0, 20).forEach(f => {
    const home = f.teams.home;
    const away = f.teams.away;
    const sc = f.goals;
    const date = new Date(f.fixture.date).toLocaleDateString(S.lang === 'ar' ? 'ar-SA' : 'en-GB');
    const scoreStr = (sc.home !== null && sc.away !== null) ? `${sc.home} - ${sc.away}` : 'vs';

    const div = document.createElement('div');
    div.className = 'fixture-card';
    div.onclick = () => selectFixture(f, div);
    div.innerHTML = `
      <div style="flex:1">
        <div class="fixture-teams">
          <div class="fixture-team-name">${home.name}</div>
          <div class="fixture-score">${scoreStr}</div>
          <div class="fixture-team-name away">${away.name}</div>
        </div>
        <div class="fixture-meta">${f.league.name} Â· ${date}</div>
      </div>
      <span class="check-icon">âœ“</span>
    `;
    container.appendChild(div);
  });
}

function selectFixture(fixture, el) {
  S.selectedFixture = fixture;
  document.querySelectorAll('#results-fixtures .fixture-card').forEach(e => e.classList.remove('selected'));
  el.classList.add('selected');
  document.getElementById('btn-create-card').disabled = false;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CREATE CARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function createCard() {
  if (!S.selectedFixture) { alert(tx('select_fixture')); return; }

  const btn = document.getElementById('btn-create-card');
  btn.disabled = true;
  btn.querySelector('span').textContent = S.lang === 'ar' ? '...' : '...';

  try {
    const fid = S.selectedFixture.fixture.id;
    const events = await apiGet(`/fixtures/events?fixture=${fid}`);
    buildMatchData(S.selectedFixture, events || []);
    initGame();
    goTo('game');
  } catch(e) {
    alert(tx('error_api') + ': ' + e.message);
  } finally {
    btn.disabled = false;
    btn.querySelector('span').textContent = tx('lbl_createcard');
  }
}

function buildMatchData(fixture, events) {
  const home = fixture.teams.home;
  const away = fixture.teams.away;

  // Parse goals+assists
  const homeEvents = [];
  const awayEvents = [];

  events.forEach(e => {
    if (e.type === 'Goal' && e.detail !== 'Missed Penalty') {
      const isHome = e.team.id === home.id;
      const entry = {
        minute: e.time.elapsed + (e.time.extra ? '+' + e.time.extra : ''),
        player: e.player.name || '?',
        type: 'G'
      };
      (isHome ? homeEvents : awayEvents).push(entry);
      // Assist
      if (e.assist && e.assist.name) {
        const assist = {
          minute: e.time.elapsed + (e.time.extra ? '+' + e.time.extra : ''),
          player: e.assist.name,
          type: 'A'
        };
        (isHome ? homeEvents : awayEvents).push(assist);
      }
    }
  });

  S.matchData = {
    league: fixture.league.name,
    season: fixture.league.season,
    homeTeam: { name: home.name, logo: home.logo },
    awayTeam: { name: away.name, logo: away.logo },
    score: `${fixture.goals.home ?? '?'} - ${fixture.goals.away ?? '?'}`,
    homeEvents,
    awayEvents,
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BUILD SQUARES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildSquares() {
  const M = S.matchData;
  const squares = [];
  let idx = 0;

  function addSq(type, label, value, meta = {}) {
    squares.push({ id: ++idx, type, label, value, meta });
  }

  addSq('league', tx('lbl_league'), M.league);
  addSq('season', tx('lbl_season'), String(M.season));
  addSq('team-home', null, M.homeTeam.name, { logo: M.homeTeam.logo });
  addSq('team-away', null, M.awayTeam.name, { logo: M.awayTeam.logo });
  addSq('score', tx('lbl_result'), M.score);

  // Generate Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  const allGoals = [
    ...M.homeEvents.filter(e => e.type === 'G').map((e,i) => ({ ...e, teamName: M.homeTeam.name, goalNum: i+1, side: 'home' })),
    ...M.awayEvents.filter(e => e.type === 'G').map((e,i) => ({ ...e, teamName: M.awayTeam.name, goalNum: i+1, side: 'away' })),
  ];

  // Check which goals have assists
  const goalsWithAssists = allGoals.filter(g => {
    const pool = g.side === 'home' ? M.homeEvents : M.awayEvents;
    const gIdx = pool.filter(e => e.type === 'G').indexOf(pool.filter(e => e.type === 'G')[g.goalNum - 1]);
    return pool.some(e => e.type === 'A' && e.minute === g.minute);
  });

  let targetQ = '', targetAnswer = '';
  if (allGoals.length > 0) {
    const pickGoal = allGoals[Math.floor(Math.random() * allGoals.length)];
    const askAssist = goalsWithAssists.length > 0 && Math.random() > 0.5;
    if (askAssist && goalsWithAssists.includes(pickGoal)) {
      targetQ = tx('targetQ_assisted', pickGoal.teamName, pickGoal.goalNum);
      const pool = pickGoal.side === 'home' ? M.homeEvents : M.awayEvents;
      const aEv = pool.find(e => e.type === 'A' && e.minute === pickGoal.minute);
      targetAnswer = aEv ? aEv.player : pickGoal.player;
    } else {
      targetQ = tx('targetQ_scored', pickGoal.teamName, pickGoal.goalNum);
      targetAnswer = pickGoal.player;
    }
  } else {
    targetQ = S.lang === 'ar' ? 'Ù…Ù† Ù„Ø¹Ø¨ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ' : 'Who played in this match?';
    targetAnswer = M.homeTeam.name;
  }

  addSq('target', tx('lbl_target'), targetQ);
  S.targetSquareIdx = idx - 1; // 0-indexed
  S.targetAnswer = targetAnswer;

  // Event squares
  const maxLen = Math.max(M.homeEvents.length, M.awayEvents.length);
  for (let i = 0; i < maxLen; i++) {
    if (M.homeEvents[i]) {
      const e = M.homeEvents[i];
      addSq('event-home', null, e.player, { type: e.type, minute: e.minute, side: 'home' });
    }
    if (M.awayEvents[i]) {
      const e = M.awayEvents[i];
      addSq('event-away', null, e.player, { type: e.type, minute: e.minute, side: 'away' });
    }
  }

  S.squares = squares;
  S.revealed = new Set();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GAME INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initGame() {
  stopTimer();
  buildSquares();
  S.teamStrikes = [0, 0];
  S.teamEliminated = [false, false];
  S.roundActive = true;
  S.correctTeam = -1;

  const M = S.matchData;
  // Header names
  document.getElementById('gh-team1-name').textContent = M.homeTeam.name;
  document.getElementById('gh-team2-name').textContent = M.awayTeam.name;
  document.getElementById('ctrl-t1-label').textContent = M.homeTeam.name;
  document.getElementById('ctrl-t2-label').textContent = M.awayTeam.name;
  document.getElementById('ro-t1-name').textContent = M.homeTeam.name;
  document.getElementById('ro-t2-name').textContent = M.awayTeam.name;

  updateScoreDisplay();
  renderCard();
  resetTimer();
  updateButtons();
  document.getElementById('answer-reveal').classList.remove('visible');
  document.getElementById('answer-text').textContent = S.targetAnswer;
  document.getElementById('status-bar').textContent = tx('status_ready');
  document.getElementById('status-bar').classList.remove('active-team');
  document.getElementById('round-over-overlay').classList.remove('show');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER CARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCard() {
  const M = S.matchData;
  const card = document.getElementById('match-card');

  const leagueSq = S.squares[0];
  const seasonSq = S.squares[1];
  const homeTeamSq = S.squares[2];
  const awayTeamSq = S.squares[3];
  const scoreSq = S.squares[4];
  const targetSq = S.squares[5];

  const homeEvSqs = S.squares.filter(s => s.type === 'event-home');
  const awayEvSqs = S.squares.filter(s => s.type === 'event-away');

  card.innerHTML = `
    <!-- League & Season -->
    <div class="card-top">
      <div style="padding:8px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:8px">
        <span class="card-info-label">${tx('lbl_league')}</span>
        ${renderInfoSq(leagueSq)}
      </div>
      <div style="padding:8px 14px;border-bottom:1px solid var(--border);border-right:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:8px">
        <span class="card-info-label">${tx('lbl_season')}</span>
        ${renderInfoSq(seasonSq)}
      </div>
    </div>

    <!-- Teams & Score -->
    <div class="card-teams-section">
      ${renderTeamSq(homeTeamSq, M.homeTeam)}
      ${renderScoreSq(scoreSq)}
      ${renderTeamSq(awayTeamSq, M.awayTeam)}
    </div>

    <!-- Target -->
    <div class="card-target-row">
      <div class="card-target-label">${tx('lbl_target')}</div>
      ${renderTargetSq(targetSq)}
    </div>

    <!-- Events -->
    <div class="card-events">
      <div class="card-events-col">
        <div class="events-header">${M.homeTeam.name}</div>
        ${homeEvSqs.length === 0
          ? `<div style="padding:10px 12px;text-align:center;color:var(--text-dim);font-size:12px">${tx('no_events')}</div>`
          : homeEvSqs.map(renderEventSq).join('')}
      </div>
      <div class="card-events-col">
        <div class="events-header">${M.awayTeam.name}</div>
        ${awayEvSqs.length === 0
          ? `<div style="padding:10px 12px;text-align:center;color:var(--text-dim);font-size:12px">${tx('no_events')}</div>`
          : awayEvSqs.map(renderEventSq).join('')}
      </div>
    </div>
  `;
}

function sqIsRevealed(sq) { return S.revealed.has(sq.id); }

function renderInfoSq(sq) {
  if (sqIsRevealed(sq)) {
    return `<span class="sq-revealed" style="font-weight:700;font-size:14px">${sq.value}</span>`;
  }
  return `<span class="info-sq sq-hidden" onclick="revealSquare(${sq.id})" title="${sq.id}">${sq.id}</span>`;
}

function renderTeamSq(sq, team) {
  if (sqIsRevealed(sq)) {
    const logo = team.logo
      ? `<img class="card-team-logo sq-revealed" src="${team.logo}" alt="" onerror="this.style.display='none'">`
      : `<div class="card-team-logo-ph">âš½</div>`;
    return `<div class="card-team sq-revealed">${logo}<div class="card-team-name">${team.name}</div></div>`;
  }
  return `<div class="team-sq sq-hidden" onclick="revealSquare(${sq.id})">${sq.id}</div>`;
}

function renderScoreSq(sq) {
  if (sqIsRevealed(sq)) {
    return `<div class="card-score-center sq-revealed">
      <div class="card-score-label">${tx('lbl_result')}</div>
      <div class="card-score-value">${sq.value}</div>
    </div>`;
  }
  return `<div class="score-sq sq-hidden" onclick="revealSquare(${sq.id})">${sq.id}</div>`;
}

function renderTargetSq(sq) {
  if (sqIsRevealed(sq)) {
    return `<div class="target-sq sq-revealed"><span class="sq-value">${sq.value}</span></div>`;
  }
  return `<div class="target-sq sq-hidden" onclick="revealSquare(${sq.id})" style="width:100%">${sq.id}</div>`;
}

function renderEventSq(sq) {
  if (sqIsRevealed(sq)) {
    return `<div class="event-sq sq-revealed">
      <span class="event-type ${sq.meta.type}">${sq.meta.type === 'G' ? tx('lbl_goal') : tx('lbl_assist')}</span>
      <span class="event-player">${sq.value}</span>
      <span class="event-minute">${sq.meta.minute}'</span>
    </div>`;
  }
  return `<div class="event-sq sq-hidden" onclick="revealSquare(${sq.id})">${sq.id}</div>`;
}

function revealSquare(id) {
  if (!S.roundActive) return;
  if (S.revealed.has(id)) return;
  S.revealed.add(id);
  renderCard();
}

function revealAll() {
  S.squares.forEach(sq => S.revealed.add(sq.id));
  renderCard();
  stopTimer();
  if (S.roundActive) {
    S.roundActive = false;
    setTimeout(() => showRoundOver(false), 500);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TIMER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function resetTimer() {
  stopTimer();
  S.timerSeconds = 30;
  const el = document.getElementById('timer-display');
  el.textContent = '30';
  el.style.color = '';
  el.classList.remove('warning');
  document.getElementById('btn-timer').querySelector('span').textContent = tx('lbl_starttimer');
  S.timerRunning = false;
}

function startTimer() {
  if (S.timerRunning) {
    stopTimer();
    return;
  }
  if (!S.roundActive) return;
  S.timerRunning = true;
  document.getElementById('btn-timer').querySelector('span').textContent = tx('lbl_stoptimer');
  document.getElementById('status-bar').textContent = tx('status_timing');
  document.getElementById('status-bar').classList.add('active-team');

  S.timerInterval = setInterval(() => {
    S.timerSeconds--;
    const el = document.getElementById('timer-display');
    el.textContent = S.timerSeconds;
    if (S.timerSeconds <= 10) {
      el.classList.add('warning');
    }
    if (S.timerSeconds <= 0) {
      stopTimer();
      el.textContent = '0';
    }
  }, 1000);
}

function stopTimer() {
  if (S.timerInterval) { clearInterval(S.timerInterval); S.timerInterval = null; }
  S.timerRunning = false;
  const btn = document.getElementById('btn-timer');
  if (btn) btn.querySelector('span').textContent = tx('lbl_starttimer');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ANSWER LOGIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function markAnswer(teamIdx, correct) {
  if (!S.roundActive) return;
  if (S.teamEliminated[teamIdx]) return;

  stopTimer();
  resetTimer();

  if (correct) {
    // Count hidden squares for points
    const hiddenCount = S.squares.length - S.revealed.size;
    S.teamPoints[teamIdx] += hiddenCount;
    S.correctTeam = teamIdx;
    S.roundActive = false;

    updateScoreDisplay();
    revealAll();

    setTimeout(() => showRoundOver(true, teamIdx, hiddenCount), 600);
  } else {
    S.teamStrikes[teamIdx]++;
    if (S.teamStrikes[teamIdx] >= 2) {
      S.teamEliminated[teamIdx] = true;
    }
    updateScoreDisplay();
    updateButtons();

    // Check if both eliminated
    if (S.teamEliminated[0] && S.teamEliminated[1]) {
      S.roundActive = false;
      revealAll();
      setTimeout(() => showRoundOver(false), 600);
    }
  }
}

function updateScoreDisplay() {
  document.getElementById('gh-team1-pts').textContent = S.teamPoints[0];
  document.getElementById('gh-team2-pts').textContent = S.teamPoints[1];
  document.getElementById('ro-t1-pts').textContent = S.teamPoints[0];
  document.getElementById('ro-t2-pts').textContent = S.teamPoints[1];

  // Strikes
  [0, 1].forEach(i => {
    const el = document.getElementById(i === 0 ? 'gh-team1-strikes' : 'gh-team2-strikes');
    el.innerHTML = '';
    for (let j = 0; j < 2; j++) {
      const d = document.createElement('div');
      d.className = 'strike-dot' + (j < S.teamStrikes[i] ? ' active' : '');
      el.appendChild(d);
    }
  });
}

function updateButtons() {
  document.getElementById('btn-t1-correct').disabled = S.teamEliminated[0] || !S.roundActive;
  document.getElementById('btn-t1-wrong').disabled = S.teamEliminated[0] || !S.roundActive;
  document.getElementById('btn-t2-correct').disabled = S.teamEliminated[1] || !S.roundActive;
  document.getElementById('btn-t2-wrong').disabled = S.teamEliminated[1] || !S.roundActive;

  if (S.teamEliminated[0]) document.getElementById('btn-t1-correct').style.opacity = '0.2';
  if (S.teamEliminated[1]) document.getElementById('btn-t2-correct').style.opacity = '0.2';
}

function toggleAnswerReveal() {
  const el = document.getElementById('answer-reveal');
  el.classList.toggle('visible');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ROUND OVER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showRoundOver(hasWinner, winnerIdx, points) {
  const overlay = document.getElementById('round-over-overlay');
  const title = document.getElementById('round-over-title');
  const msg = document.getElementById('round-over-msg');

  title.textContent = tx('roundover');
  if (hasWinner) {
    const winName = winnerIdx === 0 ? S.matchData.homeTeam.name : S.matchData.awayTeam.name;
    msg.innerHTML = `<span style="color:var(--accent)">${winName}</span> ${tx('roundover_correct')} (+${points} ${S.lang === 'ar' ? 'Ù†Ù‚Ø·Ø©' : 'pts'})`;
  } else {
    msg.textContent = tx('roundover_nobody');
  }

  overlay.classList.add('show');
}

function newCard() {
  document.getElementById('round-over-overlay').classList.remove('show');
  goTo('search');
  S.selectedFixture = null;
  S.selectedTeams = [null, null];
  document.getElementById('section-team2-search').style.display = 'none';
  document.getElementById('section-fixtures').style.display = 'none';
  document.getElementById('results-team1').innerHTML = '';
  document.getElementById('results-team2').innerHTML = '';
  document.getElementById('results-fixtures').innerHTML = '';
  document.getElementById('btn-create-card').disabled = true;
  // Pre-fill search inputs
  document.getElementById('inp-search-team1').value = S.teamInputs[0];
  document.getElementById('inp-search-team2').value = S.teamInputs[1];
}

function endGame() {
  document.getElementById('round-over-overlay').classList.remove('show');
  // Reset points for new game
  S.teamPoints = [0, 0];
  document.getElementById('gh-team1-pts').textContent = '0';
  document.getElementById('gh-team2-pts').textContent = '0';
  goTo('setup');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
setLangDir();
updateAllText();
</script>
</body>
</html>
